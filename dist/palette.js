/*!
 * palette v1.1.0
 * https://github.com/escX/palette#readme
 * 
 * Copyright 2019-present escX
 * Released under the MIT license
 * 
 * Date: 2019-4-6 09:07:55
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Palette=e():t.Palette=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o=function(t){var e=t.context,n=t.x,o=t.y,r=m(e);return e.barHorizontal?{top:-b/2,left:n-r}:{top:o-r,left:-b/2}},r=function(t){var e=t.context,n=t.x;return{top:t.y-e.panelPointRadius,left:n-e.panelPointRadius}},i=function(t){var e=t.context,n=function(t){var e=t.context,n=t.h;return e.barHorizontal?{x:n/360*e.barWidth,y:e.barHeight/2}:{x:e.barWidth/2,y:n/360*e.barHeight}}({context:e,h:t.h}),r=n.x,i=n.y;return o({context:e,x:r,y:i})},a=function(t){var e=t.context,n=function(t){var e=t.context,n=t.s,o=t.l;return{x:n/100*e.panelWidth,y:e.panelHeight-o/100*e.panelHeight}}({context:e,s:t.s,l:t.l}),o=n.x,i=n.y;return r({context:e,x:o,y:i})},l=function(t){for(var e=[],n=0;n<x;n+=1)n%5==0&&e.push("hsl(".concat(y.h," ").concat(10*n,"% ").concat(v-t-1,"%)"));return e},c=function(t){var e=t.context,n=t.lineIndex,o=l(n).join(",");return{width:"".concat(e.panelWidth,"px"),height:"".concat(e.panelHeight/v,"px"),margin:"0",padding:"0",border:"none",outline:"none",background:"linear-gradient(to right, ".concat(o,")")}},u=function(t){return{width:"".concat(t.panelWidth,"px"),height:"".concat(t.panelHeight,"px"),position:"relative",boxSizing:"content-box",overflow:"visible"}},d=function(t){var e=function(){for(var t=[],e=0;e<h;e+=1)t.push("hsl(".concat(e,", 100%, 50%)"));return t}().join(",");return{width:"".concat(t.barWidth,"px"),height:"".concat(t.barHeight,"px"),background:t.barHorizontal?"linear-gradient(to right, ".concat(e,")"):"linear-gradient(".concat(e,")")}},f=function(t){return{width:"".concat(t.barWidth,"px"),height:"".concat(t.barHeight,"px"),position:"relative",boxSizing:"content-box",overflow:"visible"}},p=function(t){var e=a({context:t,s:y.s,l:y.l});return{width:"".concat(2*t.panelPointRadius,"px"),height:"".concat(2*t.panelPointRadius,"px"),borderRadius:"50%",backgroundColor:"transparent",border:"1px solid #fff",boxShadow:"0 0 2px 0 #000",cursor:"pointer",boxSizing:"border-box",position:"absolute",top:"".concat(e.top,"px"),left:"".concat(e.left,"px")}},s=function(t){var e=i({context:t,h:y.h});return{width:"".concat(2*m(t),"px"),height:"".concat(2*m(t),"px"),borderRadius:"50%",backgroundColor:"#fff",boxShadow:"0 0 2px 0 #000",cursor:"pointer",position:"absolute",top:"".concat(e.top,"px"),left:"".concat(e.left,"px")}},h=361,x=101,v=101,b=6,g={bar:null,panel:null,barPoint:null,panelPoint:null},y={h:0,s:0,l:0},m=function(t){return t.barHorizontal?(t.barHeight+b)/2:(t.barWidth+b)/2},P=function(t){var e=t.element,n=t.top,o=t.left;e.style.top="".concat(n,"px"),e.style.left="".concat(o,"px")},w=function(t){var e=t.h,n=t.s,o=t.l,r=t.colorRange,i=!1;e=Math.round(e),n=Math.round(n),o=Math.round(o),isNaN(e)||y.h===e||(i=!0,y.h=e,function(){for(var t=0,e=g.panel.childNodes;t<e.length-1;t+=1){var n=e[t],o=l(t).join(",");n.style.background="linear-gradient(to right, ".concat(o,")")}}()),isNaN(n)||y.s===n||(i=!0,y.s=Math.round(n)),isNaN(o)||y.l===o||(i=!0,y.l=Math.round(o)),i&&r instanceof Function&&r({h:y.h,s:y.s,l:y.l})};var H=function t(e){var n=e.draggedElement,o=e.scopeElement,r=e.allowExceed,i=e.clickPosition,a=e.sliding;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draggedElement=n,this.scopeElement=o,this.allowExceed=r,this.clickPosition=i,this.sliding=a,function(){var t=this;t.draggedElement.onmousedown=function(e){var n=e.clientX-this.offsetLeft,o=e.clientY-this.offsetTop;document.onmousemove=function(e){var r=e.clientX-n,i=e.clientY-o,a=t.scopeElement,l=t.draggedElement;r<-t.allowExceed.x?r=-t.allowExceed.x:r>a.offsetWidth-l.offsetWidth+t.allowExceed.x&&(r=a.offsetWidth-l.offsetWidth+t.allowExceed.x),i<-t.allowExceed.y?i=-t.allowExceed.y:i>a.offsetHeight-l.offsetHeight+t.allowExceed.y&&(i=a.offsetHeight-l.offsetHeight+t.allowExceed.y),t.sliding({top:i,left:r})},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}},t.draggedElement.onclick=function(t){t.stopPropagation()},t.scopeElement.onclick=function(e){t.clickPosition({x:e.layerX,y:e.layerY})}}.call(this)},E=function(t){var e=t.context,n=t.x,o=t.y;return{h:e.barHorizontal?n/e.barWidth*360:o/e.barHeight*360}},R=function(t){var e=t.context,n=t.x,o=t.y;return{s:n/e.panelWidth*100,l:(e.panelHeight-o)/e.panelHeight*100}},W=function(t){var e=t.context,n=function(t){var e=t.context,n=t.top,o=t.left,r=m(e);return{x:o+r,y:n+r}}({context:e,top:t.top,left:t.left}),o=n.x,r=n.y;return E({context:e,x:o,y:r})},j=function(t){var e=t.nodeType,n=t.style,o=t.attribute,r=document.createElement(e);if(n instanceof Object)for(var i in n)r.style[i]=n[i];if(o instanceof Object)for(var a in o)r.setAttribute(a,o[a]);return r},k=function(t){var e=t.context,n=t.lineIndex;return j({nodeType:"div",style:c({context:e,lineIndex:n})})},N=function(t){var e=j({nodeType:"div",style:u(t),attribute:{class:t.panelName}}),n=function(t){return j({nodeType:"div",style:p(t)})}(t);g.panelPoint=n;for(var o=0;o<v;o+=1){var i=k({context:t,lineIndex:o});e.appendChild(i)}return e.appendChild(n),new H({draggedElement:n,scopeElement:e,allowExceed:{x:t.panelPointRadius,y:t.panelPointRadius},clickPosition:function(e){var o=e.x,i=e.y,a=r({context:t,x:o,y:i}),l=a.top,c=a.left;P({element:n,top:l,left:c});var u=R({context:t,x:o,y:i});w({s:u.s,l:u.l,colorRange:t.colorRange})},sliding:function(e){var o=e.top,r=e.left;P({element:n,top:o,left:r});var i=function(t){var e=t.context,n=function(t){var e=t.context,n=t.top;return{x:t.left+e.panelPointRadius,y:n+e.panelPointRadius}}({context:e,top:t.top,left:t.left}),o=n.x,r=n.y;return R({context:e,x:o,y:r})}({context:t,top:o,left:r});w({s:i.s,l:i.l,colorRange:t.colorRange})}}),e},z=function(t){var e=j({nodeType:"div",style:d(t)}),n=function(t){return j({nodeType:"div",style:s(t)})}(t);g.barPoint=n,new H({draggedElement:n,scopeElement:e,allowExceed:{x:t.barHorizontal?m(t):b/2,y:t.barHorizontal?b/2:m(t)},clickPosition:function(e){var r=e.x,i=e.y,a=o({context:t,x:r,y:i}),l=a.top,c=a.left;P({element:n,top:l,left:c}),w({h:E({context:t,x:r,y:i}).h,colorRange:t.colorRange})},sliding:function(e){var o=e.top,r=e.left;P({element:n,top:o,left:r}),w({h:W({context:t,top:o,left:r}).h,colorRange:t.colorRange})}});var r=j({nodeType:"div",style:f(t),attribute:{class:t.barName}});return r.appendChild(e),r.appendChild(n),r};function C(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.create(null),n=e.hsl,o=void 0===n?{h:0,s:100,l:50}:n,r=e.panelName,i=void 0===r?"panel-range":r,a=e.panelWidth,l=void 0===a?300:a,c=e.panelHeight,u=void 0===c?185:c,d=e.panelPointRadius,f=void 0===d?6:d,p=e.barName,s=void 0===p?"bar-range":p,h=e.barWidth,x=void 0===h?200:h,v=e.barHeight,b=void 0===v?20:v,g=e.barHorizontal,m=void 0===g||g,P=e.colorRange,w=void 0===P?Function():P;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.h=y.h=Math.round(o.h),this.s=y.s=Math.round(o.s),this.l=y.l=Math.round(o.l),this.panelName=i,this.panelWidth=l,this.panelHeight=u,this.panelPointRadius=f,this.barName=s,this.barWidth=x,this.barHeight=b,this.barHorizontal=m,this.colorRange=w}var e,n,o;return e=t,(n=[{key:"create",value:function(t){return function(t){var e=t.context,n=t.type;return"bar"===n?(g.bar=z(e),g.bar):"panel"===n&&(g.panel=N(e),g.panel)}({context:this,type:t})}},{key:"destory",value:function(){var t=g.panel,e=g.bar,n=g.panelPoint,o=g.barPoint;t&&(n&&(t.removeChild(n),g.panelPoint=null),t.parentNode.removeChild(t),g.panel=null),e&&(o&&(e.removeChild(o),g.barPoint=null),e.parentNode.removeChild(e),g.bar=null)}},{key:"get",value:function(){return y}},{key:"set",value:function(t){var e=t.h,n=t.s,o=t.l,r=i({context:this,h:e}),l=r.top,c=r.left;P({element:g.barPoint,top:l,left:c});var u=a({context:this,s:n,l:o}),d=u.top,f=u.left;P({element:g.panelPoint,top:d,left:f}),w({h:e,s:n,l:o})}}])&&C(e.prototype,n),o&&C(e,o),t}();e.default=M}]).default});